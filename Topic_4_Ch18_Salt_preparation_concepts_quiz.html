<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preparation of Salts Quiz</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .quiz-container {
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .setup-screen, .question-screen, .results-screen {
            display: none;
        }
        .active-screen {
            display: block;
        }
        .question {
            margin-bottom: 20px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background-color: #f9f9f9;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        .option {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option:hover {
            background-color: #f0f0f0;
        }
        .option.selected {
            border-color: #3498db;
            background-color: #e3f2fd;
        }
        .option.correct {
            border-color: #28a745;
            background-color: #d4edda;
        }
        .option.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 16px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .submit-btn {
            background-color: #3498db;
            color: white;
            margin-top: 15px;
        }
        .next-btn {
            background-color: #9b59b6;
            color: white;
            margin-top: 20px;
            display: none;
        }
        .explanation {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            background-color: #f0f8ff;
        }
        .progress {
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .current-score {
            background-color: #4a6fa5;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 16px;
        }
        .setup-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .setup-btn {
            background-color: #3498db;
            color: white;
            padding: 12px 25px;
            font-size: 18px;
            min-width: 120px;
        }
        .restart-btn {
            background-color: #3498db;
            color: white;
            padding: 12px 25px;
            font-size: 18px;
            margin-top: 25px;
        }
        .results {
            font-size: 20px;
            margin-bottom: 25px;
        }
        .score {
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            margin: 10px 0;
        }
        .feedback {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            min-height: 27px;
        }
        .positive-feedback {
            color: #28a745;
        }
        .negative-feedback {
            color: #dc3545;
        }
        .rules-summary {
            background-color: #e7f5fe;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            text-align: left;
        }
        .rules-summary h3 {
            margin-top: 0;
            color: #2980b9;
            border-bottom: 2px solid #a5d8ff;
            padding-bottom: 8px;
        }
        .mistake-item {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 4px solid #dc3545;
            background-color: #f8f9fa;
        }
        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            display: none;
        }
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="celebration" id="celebration"></div>
    
    <h1>Preparation of Salts Quiz</h1>
    
    <div class="quiz-container">
        <div class="setup-screen active-screen" id="setupScreen">
            <p style="font-size: 18px;">How many questions would you like to attempt?</p>
            <div class="setup-options">
                <button class="setup-btn" onclick="startQuiz(5)">5 Questions</button>
                <button class="setup-btn" onclick="startQuiz(10)">10 Questions</button>
                <button class="setup-btn" onclick="startQuiz(15)">15 Questions</button>
            </div>
            
            <div class="rules-summary">
                <h3>Preparation of Salts - Key Concepts</h3>
                <p>Methods for preparing salts:</p>
                <ol>
                    <li><strong>Insoluble salts:</strong> Prepared by precipitation (mixing solutions containing the required ions)</li>
                    <li><strong>Soluble salts:</strong> 
                        <ul>
                            <li>Acid + excess metal/insoluble base/insoluble carbonate</li>
                            <li>Acid + alkali/soluble carbonate (by titration)</li>
                        </ul>
                    </li>
                </ol>
                <p><strong>Separation methods:</strong> Filtration, crystallization, evaporation, drying</p>
                <p><strong>Key factors:</strong> Safety, purity, solubility of the salt</p>
            </div>
        </div>
        
        <div class="question-screen" id="questionScreen">
            <div class="progress">
                <span id="progressText">Question 1 of 10</span>
                <span class="current-score" id="currentScore">Score: 0</span>
            </div>
            <div class="question" id="currentQuestion">
                <p id="questionText" style="font-size: 20px; font-weight: bold;">Which method is most suitable for preparing copper(II) sulphate crystals?</p>
                <div class="options" id="optionsContainer">
                    <div class="option" data-index="0">A. Mixing copper metal with dilute sulphuric acid</div>
                    <div class="option" data-index="1">B. Adding excess copper(II) oxide to dilute sulphuric acid</div>
                    <div class="option" data-index="2">C. Mixing copper(II) nitrate solution with sodium sulphate solution</div>
                    <div class="option" data-index="3">D. Titrating sodium hydroxide solution with sulphuric acid</div>
                </div>
                <div class="feedback" id="feedback"></div>
                <div class="explanation" id="explanation">
                    <strong>Correct Answer:</strong> B<br>
                    <strong>Explanation:</strong> Copper(II) sulphate is a soluble salt that can be prepared by adding excess copper(II) oxide (an insoluble base) to dilute sulphuric acid. The excess solid can be filtered off, leaving a pure solution of copper(II) sulphate which can then be crystallized.
                </div>
                <button class="submit-btn" id="submitBtn" onclick="checkAnswer()">Submit Answer</button>
                <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next Question ‚ûî</button>
            </div>
        </div>
        
        <div class="results-screen" id="resultsScreen">
            <h2>Quiz Results</h2>
            <div class="results">
                <p>You answered <span class="score" id="finalScore">8</span> out of <span id="totalQuestions">10</span> correctly!</p>
                <p id="performanceComment">Great job! You understand salt preparation well.</p>
            </div>
            
            <div id="mistakesContainer">
                <h3>Review Your Mistakes</h3>
                <div id="mistakesList"></div>
            </div>
            
            <div class="rules-summary">
                <h3>Key Points to Remember</h3>
                <ul>
                    <li>For <strong>insoluble salts</strong>, use precipitation by mixing solutions containing the required ions.</li>
                    <li>For <strong>soluble salts</strong> (except group I and ammonium salts), use acid + excess insoluble base/carbonate.</li>
                    <li>For <strong>group I and ammonium salts</strong>, use titration with acid + alkali/soluble carbonate.</li>
                    <li>Common separation methods: <strong>filtration</strong> (insoluble solids), <strong>crystallization</strong> (soluble salts), <strong>evaporation</strong> (very soluble salts), <strong>drying</strong> (final step).</li>
                    <li>Always consider <strong>safety</strong> (e.g., avoid reactive metals with acids) and <strong>purity</strong> (use excess reactants that can be removed).</li>
                </ul>
            </div>
            
            <button class="restart-btn" onclick="returnToSetup()">Take Another Quiz</button>
        </div>
    </div>
    
    <script>
        // Quiz data
        const questions = [
            {
                question: "Which method is most suitable for preparing copper(II) sulphate crystals?",
                options: [
                    "Mixing copper metal with dilute sulphuric acid",
                    "Adding excess copper(II) oxide to dilute sulphuric acid",
                    "Mixing copper(II) nitrate solution with sodium sulphate solution",
                    "Titrating sodium hydroxide solution with sulphuric acid"
                ],
                correctIndex: 1,
                explanation: "Copper(II) sulphate is a soluble salt that can be prepared by adding excess copper(II) oxide (an insoluble base) to dilute sulphuric acid. The excess solid can be filtered off, leaving a pure solution of copper(II) sulphate which can then be crystallized."
            },
            {
                question: "Why is it necessary to use excess solid when preparing a soluble salt from an acid and an insoluble base?",
                options: [
                    "To speed up the reaction",
                    "To ensure all the acid is neutralized and can be removed by filtration",
                    "To make the solution more concentrated",
                    "To prevent the salt from crystallizing too quickly"
                ],
                correctIndex: 1,
                explanation: "Using excess solid ensures all the acid is neutralized. The excess solid can then be removed by filtration, leaving a pure salt solution without any remaining acid that would contaminate the product."
            },
            {
                question: "Which of the following salts could be prepared by precipitation?",
                options: [
                    "Sodium chloride",
                    "Potassium nitrate",
                    "Silver chloride",
                    "Ammonium sulphate"
                ],
                correctIndex: 2,
                explanation: "Silver chloride is insoluble and can be prepared by precipitation (mixing solutions containing Ag‚Å∫ and Cl‚Åª ions). The other salts listed are all soluble and would need to be prepared by other methods."
            },
            {
                question: "What is the main reason why sodium nitrate cannot be prepared by adding excess sodium hydroxide to nitric acid?",
                options: [
                    "Sodium hydroxide is too expensive",
                    "The reaction is too violent",
                    "Sodium hydroxide is soluble and cannot be removed by filtration",
                    "Nitric acid doesn't react with sodium hydroxide"
                ],
                correctIndex: 2,
                explanation: "Sodium hydroxide is soluble in water, so any excess would remain in solution with the sodium nitrate product, making it impossible to separate them and obtain pure sodium nitrate."
            },
            {
                question: "Which observation indicates that neutralization is complete when preparing a salt by adding an insoluble carbonate to an acid?",
                options: [
                    "The temperature starts to decrease",
                    "The solution changes color",
                    "Bubbling (from CO‚ÇÇ production) stops",
                    "A precipitate forms"
                ],
                correctIndex: 2,
                explanation: "The production of carbon dioxide gas (bubbling) stops when all the acid has reacted with the carbonate, indicating neutralization is complete."
            },
            {
                question: "What is the purpose of washing the precipitate with distilled water in the preparation of an insoluble salt?",
                options: [
                    "To dissolve the precipitate",
                    "To remove soluble impurities",
                    "To speed up the drying process",
                    "To make the salt crystals larger"
                ],
                correctIndex: 1,
                explanation: "Washing with distilled water removes any soluble impurities (like unreacted reagents or other soluble salts) that might be clinging to the surface of the insoluble salt precipitate."
            },
            {
                question: "Which pair of reagents would be suitable for preparing pure dry lead(II) sulphate?",
                options: [
                    "Lead metal and dilute sulphuric acid",
                    "Lead(II) oxide and sodium sulphate solution",
                    "Lead(II) nitrate solution and sodium sulphate solution",
                    "Lead(II) carbonate and dilute sulphuric acid"
                ],
                correctIndex: 2,
                explanation: "Lead(II) sulphate is insoluble and can be prepared by precipitation - mixing lead(II) nitrate solution (providing Pb¬≤‚Å∫ ions) with sodium sulphate solution (providing SO‚ÇÑ¬≤‚Åª ions). The other methods either wouldn't work (lead metal doesn't react with dilute acid) or would produce other products."
            },
            {
                question: "Why is titration used to prepare sodium, potassium and ammonium salts?",
                options: [
                    "Because these salts are all insoluble",
                    "Because the reactants are all soluble so excess cannot be removed by filtration",
                    "Because the reactions are too violent otherwise",
                    "Because these salts decompose when heated"
                ],
                correctIndex: 1,
                explanation: "Sodium, potassium and ammonium compounds are all soluble, so if excess reactant is used, it cannot be removed by filtration. Titration ensures exact amounts are mixed so neither reactant is in excess."
            },
            {
                question: "What would happen if you tried to prepare calcium sulphate by adding calcium carbonate to concentrated sulphuric acid?",
                options: [
                    "It would work perfectly to produce pure calcium sulphate",
                    "The calcium sulphate formed would coat the calcium carbonate and prevent further reaction",
                    "The reaction would be too violent",
                    "No reaction would occur"
                ],
                correctIndex: 1,
                explanation: "Calcium sulphate is slightly soluble and would form a coating on the calcium carbonate particles, preventing further contact between the acid and unreacted carbonate. This would result in an impure product contaminated with unreacted calcium carbonate."
            },
            {
                question: "What is the ionic equation for all neutralization reactions between strong acids and strong alkalis?",
                options: [
                    "H‚Å∫(aq) + OH‚Åª(aq) ‚Üí H‚ÇÇO(l)",
                    "H‚Å∫(aq) + O¬≤‚Åª(aq) ‚Üí OH‚Åª(aq)",
                    "H‚ÇÇ(aq) + O‚ÇÇ(aq) ‚Üí H‚ÇÇO(l)",
                    "H‚ÇÉO‚Å∫(aq) + OH‚Åª(aq) ‚Üí 2H‚ÇÇO(l)"
                ],
                correctIndex: 0,
                explanation: "The ionic equation H‚Å∫(aq) + OH‚Åª(aq) ‚Üí H‚ÇÇO(l) represents the essential reaction in all neutralizations between strong acids and strong alkalis, regardless of which specific acid or alkali is used."
            },
            {
                question: "Why is neutralization considered an exothermic reaction?",
                options: [
                    "It absorbs heat from the surroundings",
                    "It releases heat to the surroundings",
                    "It requires continuous heating",
                    "It produces gases that expand"
                ],
                correctIndex: 1,
                explanation: "Neutralization is exothermic because heat energy is released when H‚Å∫ and OH‚Åª ions combine to form water molecules. This causes the temperature of the reaction mixture to rise."
            },
            {
                question: "Which factor does NOT affect the temperature rise during neutralization?",
                options: [
                    "The strength of the acid and alkali",
                    "The number of moles of water formed",
                    "The total volume of the reaction mixture",
                    "The color of the solution"
                ],
                correctIndex: 3,
                explanation: "The color of the solution has no effect on the temperature change during neutralization. The temperature rise depends on the amount of heat released (affected by acid/alkali strength and moles of water formed) and the volume of solution that heat is distributed in."
            },
            {
                question: "What is the purpose of adding an indicator when preparing a salt by titration?",
                options: [
                    "To speed up the reaction",
                    "To show when exactly enough acid has been added to neutralize the alkali",
                    "To make the salt crystals colored",
                    "To prevent the solution from boiling"
                ],
                correctIndex: 1,
                explanation: "An acid-base indicator changes color at the endpoint of the titration, showing when exactly enough acid has been added to completely neutralize the alkali (or vice versa), with neither reactant in excess."
            },
            {
                question: "Which of these combinations would produce an acid salt rather than a normal salt?",
                options: [
                    "NaOH + HCl ‚Üí NaCl + H‚ÇÇO",
                    "2NaOH + H‚ÇÇSO‚ÇÑ ‚Üí Na‚ÇÇSO‚ÇÑ + 2H‚ÇÇO",
                    "NaOH + H‚ÇÇSO‚ÇÑ ‚Üí NaHSO‚ÇÑ + H‚ÇÇO",
                    "NH‚ÇÉ + HNO‚ÇÉ ‚Üí NH‚ÇÑNO‚ÇÉ"
                ],
                correctIndex: 2,
                explanation: "An acid salt is formed when only some of the replaceable hydrogen ions in an acid are replaced. NaHSO‚ÇÑ (sodium hydrogensulphate) is an acid salt because it still has one H‚Å∫ ion that could be replaced, unlike normal salts where all H‚Å∫ ions are replaced."
            },
            // New questions for separation methods
            {
                question: "Which sequence of steps is correct for preparing pure dry copper(II) sulphate crystals from copper(II) oxide and sulphuric acid?",
                options: [
                    "Mixing ‚Üí filtering ‚Üí crystallizing ‚Üí drying",
                    "Mixing ‚Üí crystallizing ‚Üí filtering ‚Üí drying",
                    "Mixing ‚Üí evaporating to dryness ‚Üí filtering",
                    "Mixing ‚Üí filtering ‚Üí evaporating to dryness"
                ],
                correctIndex: 0,
                explanation: "The correct sequence is: 1) Mix reactants, 2) Filter to remove excess copper(II) oxide, 3) Crystallize by evaporating some water, 4) Dry the crystals between filter paper."
            },
            {
                question: "When preparing an insoluble salt like barium sulphate, which separation method is used after mixing the solutions?",
                options: [
                    "Crystallization",
                    "Titration",
                    "Filtration",
                    "Distillation"
                ],
                correctIndex: 2,
                explanation: "For insoluble salts, filtration is used to separate the precipitate from the solution. The precipitate is then washed with distilled water and dried."
            },
            // New questions for choosing suitable chemicals
            {
                question: "Which of the following pairs would be suitable for preparing zinc chloride?",
                options: [
                    "Zinc metal and sodium chloride solution",
                    "Zinc oxide and hydrochloric acid",
                    "Zinc carbonate and sulphuric acid",
                    "Zinc nitrate and potassium chloride solution"
                ],
                correctIndex: 1,
                explanation: "Zinc chloride can be prepared by reacting zinc oxide (an insoluble base) with hydrochloric acid. The excess zinc oxide can be filtered off, and the solution can be evaporated to obtain crystals."
            },
            {
                question: "Which combination would NOT be suitable for preparing potassium nitrate?",
                options: [
                    "Potassium hydroxide and nitric acid",
                    "Potassium carbonate and nitric acid",
                    "Potassium chloride and silver nitrate",
                    "Potassium sulphate and barium nitrate"
                ],
                correctIndex: 3,
                explanation: "Potassium sulphate and barium nitrate would produce barium sulphate (insoluble) and potassium nitrate, but this is not a practical method as it's difficult to separate the potassium nitrate from the barium sulphate precipitate."
            },
            {
                question: "Which acid would be most suitable for preparing calcium phosphate?",
                options: [
                    "Hydrochloric acid",
                    "Sulphuric acid",
                    "Nitric acid",
                    "Phosphoric acid"
                ],
                correctIndex: 3,
                explanation: "Phosphoric acid (H‚ÇÉPO‚ÇÑ) is needed to provide the phosphate (PO‚ÇÑ¬≥‚Åª) ions required to make calcium phosphate. The other acids would produce different calcium salts."
            }
        ];

        // Quiz variables
        let currentQuestionIndex = 0;
        let score = 0;
        let totalQuestions = 10;
        let quizQuestions = [];
        let selectedOption = null;
        let mistakes = [];
        
        // DOM elements
        const setupScreen = document.getElementById('setupScreen');
        const questionScreen = document.getElementById('questionScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const progressText = document.getElementById('progressText');
        const currentScore = document.getElementById('currentScore');
        const questionText = document.getElementById('questionText');
        const optionsContainer = document.getElementById('optionsContainer');
        const explanation = document.getElementById('explanation');
        const feedback = document.getElementById('feedback');
        const submitBtn = document.getElementById('submitBtn');
        const nextBtn = document.getElementById('nextBtn');
        const finalScore = document.getElementById('finalScore');
        const totalQuestionsElement = document.getElementById('totalQuestions');
        const performanceComment = document.getElementById('performanceComment');
        const mistakesList = document.getElementById('mistakesList');
        const celebration = document.getElementById('celebration');
        
        // Start the quiz
        function startQuiz(numQuestions) {
            totalQuestions = numQuestions;
            currentQuestionIndex = 0;
            score = 0;
            mistakes = [];
            
            // Select random questions
            quizQuestions = [...questions];
            shuffleArray(quizQuestions);
            quizQuestions = quizQuestions.slice(0, totalQuestions);
            
            // Show first question
            showQuestion();
            
            // Switch screens
            setupScreen.classList.remove('active-screen');
            questionScreen.classList.add('active-screen');
            resultsScreen.classList.remove('active-screen');
            
            // Update score display
            updateScore();
        }
        
        // Show current question
        function showQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            questionText.textContent = question.question;
            
            // Clear previous options and selections
            optionsContainer.innerHTML = '';
            selectedOption = null;
            
            // Create new options
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = String.fromCharCode(65 + index) + '. ' + option;
                optionElement.dataset.index = index;
                optionElement.addEventListener('click', selectOption);
                optionsContainer.appendChild(optionElement);
            });
            
            // Reset UI elements
            explanation.style.display = 'none';
            feedback.textContent = '';
            feedback.className = 'feedback';
            submitBtn.style.display = 'inline-block';
            nextBtn.style.display = 'none';
            
            // Update progress
            progressText.textContent = `Question ${currentQuestionIndex + 1} of ${totalQuestions}`;
        }
        
        // Select an option
        function selectOption(e) {
            // Remove selected class from all options
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            e.target.classList.add('selected');
            selectedOption = parseInt(e.target.dataset.index);
        }
        
        // Check the answer
        function checkAnswer() {
            if (selectedOption === null) {
                feedback.textContent = 'Please select an answer!';
                feedback.className = 'feedback negative-feedback';
                return;
            }
            
            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === question.correctIndex;
            
            // Show explanation
            explanation.style.display = 'block';
            explanation.innerHTML = `<strong>Correct Answer:</strong> ${String.fromCharCode(65 + question.correctIndex)}. ${question.options[question.correctIndex]}<br>
                                    <strong>Explanation:</strong> ${question.explanation}`;
            
            // Highlight correct and incorrect options
            document.querySelectorAll('.option').forEach((opt, index) => {
                if (index === question.correctIndex) {
                    opt.classList.add('correct');
                } else if (index === selectedOption && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });
            
            // Disable further selection
            document.querySelectorAll('.option').forEach(opt => {
                opt.style.cursor = 'default';
                opt.removeEventListener('click', selectOption);
            });
            
            // Update score and feedback
            if (isCorrect) {
                score++;
                feedback.textContent = getRandomPositiveFeedback();
                feedback.className = 'feedback positive-feedback';
            } else {
                feedback.textContent = getRandomNegativeFeedback();
                feedback.className = 'feedback negative-feedback';
                
                // Record mistake
                mistakes.push({
                    question: question.question,
                    yourAnswer: question.options[selectedOption],
                    correctAnswer: question.options[question.correctIndex],
                    explanation: question.explanation
                });
            }
            
            updateScore();
            
            // Show next button
            submitBtn.style.display = 'none';
            nextBtn.style.display = 'inline-block';
            
            // Celebrate if correct
            if (isCorrect) {
                celebrate();
            }
        }
        
        // Move to next question
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < totalQuestions) {
                showQuestion();
            } else {
                showResults();
            }
        }
        
        // Show results
        function showResults() {
            questionScreen.classList.remove('active-screen');
            resultsScreen.classList.add('active-screen');
            
            finalScore.textContent = score;
            totalQuestionsElement.textContent = totalQuestions;
            
            // Calculate percentage
            const percentage = Math.round((score / totalQuestions) * 100);
            
            // Add performance comment
            if (percentage >= 90) {
                performanceComment.textContent = "Excellent! You've mastered salt preparation!";
                bigCelebration();
            } else if (percentage >= 70) {
                performanceComment.textContent = "Good job! You understand most concepts well.";
            } else if (percentage >= 50) {
                performanceComment.textContent = "Not bad! Review the mistakes and try again.";
            } else {
                performanceComment.textContent = "Keep practicing! Review the key concepts and try again.";
            }
            
            // Display mistakes
            displayMistakes();
        }
        
        // Display mistakes in results screen
        function displayMistakes() {
            mistakesList.innerHTML = '';
            
            if (mistakes.length === 0) {
                mistakesList.innerHTML = '<p>Perfect! No mistakes.</p>';
                return;
            }
            
            mistakes.forEach(mistake => {
                const mistakeElement = document.createElement('div');
                mistakeElement.className = 'mistake-item';
                mistakeElement.innerHTML = `
                    <p><strong>Question:</strong> ${mistake.question}</p>
                    <p><strong>Your answer:</strong> ${mistake.yourAnswer}</p>
                    <p><strong>Correct answer:</strong> ${mistake.correctAnswer}</p>
                    <p><strong>Explanation:</strong> ${mistake.explanation}</p>
                `;
                mistakesList.appendChild(mistakeElement);
            });
        }
        
        // Return to setup screen
        function returnToSetup() {
            resultsScreen.classList.remove('active-screen');
            questionScreen.classList.remove('active-screen');
            setupScreen.classList.add('active-screen');
        }
        
        // Update score display
        function updateScore() {
            currentScore.textContent = `Score: ${score}/${totalQuestions}`;
        }
        
        // Celebration effects
        function celebrate() {
            // Small animation for correct answers
            const options = document.querySelectorAll('.option');
            options.forEach(opt => {
                opt.style.transform = 'scale(1.02)';
                setTimeout(() => {
                    opt.style.transform = 'scale(1)';
                }, 300);
            });
        }
        
        function bigCelebration() {
            // Create confetti effect
            celebration.style.display = 'block';
            const colors = ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = -10 + 'px';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                const size = Math.random() * 10 + 5;
                confetti.style.width = size + 'px';
                confetti.style.height = size + 'px';
                
                celebration.appendChild(confetti);
                
                // Animate
                const animation = confetti.animate([
                    { top: '-10px', opacity: 1 },
                    { top: '100vh', opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.1,0.2,0.7,1)'
                });
                
                animation.onfinish = () => {
                    confetti.remove();
                };
            }
            
            setTimeout(() => {
                celebration.style.display = 'none';
                celebration.innerHTML = '';
            }, 3000);
        }
        
        // Helper functions
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function getRandomPositiveFeedback() {
            const feedbacks = [
                "üéâ Correct! Well done!",
                "üåü Excellent answer!",
                "üíØ Perfect! You know your chemistry!",
                "üëç Great job!",
                "üëè That's exactly right!"
            ];
            return feedbacks[Math.floor(Math.random() * feedbacks.length)];
        }
        
        function getRandomNegativeFeedback() {
            const feedbacks = [
                "üòï Not quite right.",
                "ü§î Close! Review this concept.",
                "üìö Let's review this one.",
                "üîç Check the explanation carefully.",
                "üí° Remember the key concepts for next time."
            ];
            return feedbacks[Math.floor(Math.random() * feedbacks.length)];
        }
    </script>
</body>
</html>
