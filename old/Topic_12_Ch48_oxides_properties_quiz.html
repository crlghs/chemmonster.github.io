<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oxide Properties Chemistry Quiz</title>
    <!-- Link to Google Fonts for a more engaging font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* * Student Encouragement: The styles here are designed to make learning fun! 
         * A bright, clean layout helps you focus, and fun colors make it less of a chore.
         * Notice the smooth transitions and animations - they make the experience more interactive.
         */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --accent-color: #f1c40f;
            --correct-color: #28a745;
            --incorrect-color: #e74c3c;
            --light-bg: #ecf0f1;
            --dark-text: #2c3e50;
            --light-text: #ffffff;
            --border-radius: 12px;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif; /* A friendly and readable font */
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #6dd5ed, #2193b0); /* Engaging gradient background */
            color: var(--dark-text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            background-color: var(--light-text);
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            max-width: 800px;
            width: 100%;
            margin: 20px auto;
            box-sizing: border-box;
            text-align: center;
            transition: transform 0.3s ease-in-out;
        }

        .container:hover {
            transform: translateY(-5px);
        }

        h1 {
            font-size: 2.5em;
            font-weight: 700;
            color: var(--dark-text);
            margin-bottom: 10px;
        }
        
        h1 span {
            color: var(--primary-color);
        }

        h2 {
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 30px;
        }
        
        /* The initial choice screen - your first step to becoming a chemistry pro! */
        .quiz-selection button {
            padding: 15px 30px;
            margin: 10px;
            border-radius: 50px; /* Fun pill shape */
            border: none;
            background-image: linear-gradient(to right, #3498db, #2980b9);
            color: var(--light-text);
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
        }

        .quiz-selection button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.5);
        }

        .settings, .quiz-area, .results {
            margin-top: 20px;
            padding: 20px;
            border-top: 2px solid var(--light-bg);
        }
        
        .settings label {
            font-weight: 600;
            margin-right: 10px;
        }
        
        .settings select, .settings button {
            padding: 10px 20px;
            border-radius: 8px;
            border: 2px solid var(--light-bg);
            font-size: 1em;
            cursor: pointer;
            margin: 5px;
        }

        .settings button {
            background-color: var(--primary-color);
            color: var(--light-text);
            border: none;
            transition: all 0.3s ease;
        }
        
        .settings button:hover {
            background-color: #2980b9;
        }

        .question-counter {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 15px;
        }

        .question {
            font-size: 1.5em;
            margin-bottom: 30px;
            font-weight: 600;
            min-height: 60px;
            line-height: 1.4;
        }
        
        /* Option buttons are designed to be clear and satisfying to click. */
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .option-button {
            padding: 15px;
            border: 2px solid #bdc3c7;
            border-radius: var(--border-radius);
            background-color: transparent;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            line-height: 1.4;
        }

        .option-button:hover {
            background-color: var(--light-bg);
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        /* These styles give you immediate, clear feedback. Green for go, red for 'let's try again'. */
        .option-button.correct {
            background-color: #d4edda;
            border-color: var(--correct-color);
            color: var(--correct-color);
            font-weight: 700;
            animation: pulse 0.5s;
        }

        .option-button.incorrect {
            background-color: #f8d7da;
            border-color: var(--incorrect-color);
            color: var(--incorrect-color);
            font-weight: 700;
            animation: shake 0.5s;
        }
        
        .feedback {
            text-align: center;
            margin-top: 25px;
            font-weight: 600;
            font-size: 1.2em;
            min-height: 30px;
        }

        .navigation-buttons button {
            padding: 12px 35px;
            border-radius: 50px;
            border: none;
            background-color: var(--secondary-color);
            color: var(--light-text);
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .navigation-buttons button:hover:not(:disabled) {
            background-color: #27ae60;
            transform: scale(1.05);
        }

        .navigation-buttons button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .results-summary {
            font-size: 1.8em;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .results-message {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #34495e;
        }

        .retake-button {
            padding: 15px 40px;
            background-color: var(--accent-color);
            color: var(--dark-text);
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }
        
        .retake-button:hover {
            background-color: #f39c12;
            transform: scale(1.05);
        }
        
        .back-button {
             background-color: #bdc3c7;
        }
        
        .back-button:hover {
             background-color: #95a5a6;
        }

        /* Animations make the quiz feel more alive! */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Responsive design is key to learning on any device! */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            h1 { font-size: 2em; }
            .options { grid-template-columns: 1fr; }
            .settings, .quiz-selection {
                display: flex;
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Welcome to the <span>Oxide Properties</span> Quiz!</h1>

        <div class="quiz-selection" id="quizSelection">
            <h2>Ready to test your knowledge? Choose a quiz!</h2>
            <button onclick="showQuizSettings('classification')">Classification Quiz</button>
            <button onclick="showQuizSettings('bonding')">Bonding & Structure Quiz</button>
            <button onclick="showQuizSettings('reactions')">Reactions & Equations Quiz</button>
        </div>

        <!-- Classification Quiz Section -->
        <div id="classificationQuiz" style="display: none;">
            <div class="settings" id="classificationSettings">
                <h2>Classification Quiz Settings</h2>
                <div>
                    <label for="classificationNumQuestions">Number of Questions:</label>
                    <select id="classificationNumQuestions">
                        <option value="5" selected>5</option>
                        <option value="10">10</option>
                        <option value="12">All 12</option>
                    </select>
                </div>
                <div>
                    <button onclick="startQuiz('classification')">Start Quiz!</button>
                    <button onclick="resetToSelection()" class="back-button">Go Back</button>
                </div>
            </div>

            <div class="quiz-area" id="classificationQuizArea" style="display: none;">
                <p class="question-counter" id="classificationQuestionCounter"></p>
                <div class="question" id="classificationCurrentQuestion"></div>
                <div class="options" id="classificationOptionsContainer">
                    <button class="option-button" data-answer="basic" onclick="checkAnswer(this, 'classification')">Basic Oxide</button>
                    <button class="option-button" data-answer="amphoteric" onclick="checkAnswer(this, 'classification')">Amphoteric Oxide</button>
                    <button class="option-button" data-answer="acidic" onclick="checkAnswer(this, 'classification')">Acidic Oxide</button>
                    <button class="option-button" data-answer="neutral" onclick="checkAnswer(this, 'classification')">Neutral Oxide</button>
                </div>
                <div class="feedback" id="classificationFeedback"></div>
                <div class="navigation-buttons">
                    <button id="classificationNextQuestionBtn" onclick="nextQuestion('classification')" disabled>Next Question</button>
                </div>
            </div>

            <div class="results" id="classificationResults" style="display: none;">
                <h2>Quiz Complete!</h2>
                <p class="results-summary" id="classificationScoreSummary"></p>
                <p class="results-message" id="classificationResultMessage"></p>
                <button class="retake-button" onclick="resetQuiz('classification')">Retake Quiz</button>
                <button class="retake-button back-button" onclick="resetToSelection()">Back to Selection</button>
            </div>
        </div>
        
        <!-- Bonding & Structure Quiz Section -->
        <div id="bondingQuiz" style="display: none;">
            <div class="settings" id="bondingSettings">
                <h2>Bonding & Structure Quiz Settings</h2>
                 <div>
                    <label for="bondingNumQuestions">Number of Questions:</label>
                    <select id="bondingNumQuestions">
                        <option value="5" selected>5</option>
                        <option value="8">All 8</option>
                    </select>
                </div>
                <div>
                    <button onclick="startQuiz('bonding')">Start Quiz!</button>
                    <button onclick="resetToSelection()" class="back-button">Go Back</button>
                </div>
            </div>

            <div class="quiz-area" id="bondingQuizArea" style="display: none;">
                <p class="question-counter" id="bondingQuestionCounter"></p>
                <div class="question" id="bondingCurrentQuestion"></div>
                <div class="options" id="bondingOptionsContainer"></div>
                <div class="feedback" id="bondingFeedback"></div>
                <div class="navigation-buttons">
                    <button id="bondingNextQuestionBtn" onclick="nextQuestion('bonding')" disabled>Next Question</button>
                </div>
            </div>

            <div class="results" id="bondingResults" style="display: none;">
                <h2>Quiz Complete!</h2>
                <p class="results-summary" id="bondingScoreSummary"></p>
                <p class="results-message" id="bondingResultMessage"></p>
                <button class="retake-button" onclick="resetQuiz('bonding')">Retake Quiz</button>
                <button class="retake-button back-button" onclick="resetToSelection()">Back to Selection</button>
            </div>
        </div>

        <!-- Reactions Quiz Section -->
        <div id="reactionsQuiz" style="display: none;">
            <div class="settings" id="reactionsSettings">
                <h2>Reactions & Equations Quiz Settings</h2>
                 <div>
                    <label for="reactionsNumQuestions">Number of Questions:</label>
                    <select id="reactionsNumQuestions">
                        <option value="5" selected>5</option>
                        <option value="10">10</option>
                        <option value="15">15</option>
                        <option value="17">All 17</option>
                    </select>
                </div>
                <div>
                    <button onclick="startQuiz('reactions')">Start Quiz!</button>
                    <button onclick="resetToSelection()" class="back-button">Go Back</button>
                </div>
            </div>

            <div class="quiz-area" id="reactionsQuizArea" style="display: none;">
                <p class="question-counter" id="reactionsQuestionCounter"></p>
                <div class="question" id="reactionsCurrentQuestion"></div>
                <div class="options" id="reactionsOptionsContainer"></div>
                <div class="feedback" id="reactionsFeedback"></div>
                <div class="navigation-buttons">
                    <button id="reactionsNextQuestionBtn" onclick="nextQuestion('reactions')" disabled>Next Question</button>
                </div>
            </div>

            <div class="results" id="reactionsResults" style="display: none;">
                <h2>Quiz Complete!</h2>
                <p class="results-summary" id="reactionsScoreSummary"></p>
                <p class="results-message" id="reactionsResultMessage"></p>
                <button class="retake-button" onclick="resetQuiz('reactions')">Retake Quiz</button>
                <button class="retake-button back-button" onclick="resetToSelection()">Back to Selection</button>
            </div>
        </div>
    </div>

    <script>
        // Student Encouragement: This script is the "brain" of the quiz.
        // Every function is a step in your learning journey. Don't worry if you don't understand it all,
        // the important part is to engage with the quiz and learn the chemistry!

        // Data for Classification Quiz
        const classificationOxides = [
            { oxide: "Na<sub>2</sub>O", type: "basic" }, { oxide: "MgO", type: "basic" }, { oxide: "Al<sub>2</sub>O<sub>3</sub>", type: "amphoteric" },
            { oxide: "SiO<sub>2</sub>", type: "acidic" }, { oxide: "P<sub>4</sub>O<sub>10</sub>", type: "acidic" }, { oxide: "SO<sub>2</sub>", type: "acidic" },
            { oxide: "Cl<sub>2</sub>O", type: "acidic" }, { oxide: "CO", type: "neutral" }, { oxide: "NO", type: "neutral" },
            { oxide: "N<sub>2</sub>O", type: "neutral" }, { oxide: "SO<sub>3</sub>", type: "acidic" }, { oxide: "CaO", type: "basic" }
        ];

        // Data for Bonding & Structure Quiz
        const bondingAndStructureOxides = [
            { questionText: "What is the structure of Na<sub>2</sub>O?", options: ["Giant ionic", "Giant covalent", "Simple molecular", "Metallic"], correctAnswer: "Giant ionic" },
            { questionText: "Which of the following oxides has a simple molecular structure?", options: ["MgO", "Al<sub>2</sub>O<sub>3</sub>", "P<sub>4</sub>O<sub>10</sub>", "SiO<sub>2</sub>"], correctAnswer: "P<sub>4</sub>O<sub>10</sub>" },
            { questionText: "The bonding in SiO<sub>2</sub> is best described as...", options: ["Ionic", "Covalent", "Metallic", "Hydrogen bonding"], correctAnswer: "Covalent" },
            { questionText: "Which of these Period 3 oxides has a giant covalent structure?", options: ["Na<sub>2</sub>O", "SO<sub>2</sub>", "SiO<sub>2</sub>", "MgO"], correctAnswer: "SiO<sub>2</sub>" },
            { questionText: "As you move from Na<sub>2</sub>O to Cl<sub>2</sub>O across Period 3, the bonding becomes...", options: ["More ionic", "More covalent", "More metallic", "Weaker"], correctAnswer: "More covalent" },
            { questionText: "What type of bonding is present in MgO?", options: ["Covalent", "Ionic", "Metallic", "Polar covalent"], correctAnswer: "Ionic" },
            { questionText: "SO<sub>2</sub> has which type of structure?", options: ["Giant ionic", "Giant covalent", "Simple molecular", "Monatomic"], correctAnswer: "Simple molecular" },
            { questionText: "Which of these oxides has predominantly ionic bonding but with some covalent character?", options: ["Na<sub>2</sub>O", "Al<sub>2</sub>O<sub>3</sub>", "SiO<sub>2</sub>", "P<sub>4</sub>O<sub>10</sub>"], correctAnswer: "Al<sub>2</sub>O<sub>3</sub>" }
        ];

        // Data for Reactions Quiz
        const reactionsOxides = [
            { questionText: "What is observed when Na<sub>2</sub>O reacts with H<sub>2</sub>O?", options: ["No visible reaction", "Dissolves vigorously to form a strongly alkaline solution", "Forms a white precipitate", "Forms an acidic gas"], correctAnswer: "Dissolves vigorously to form a strongly alkaline solution" },
            { questionText: "What is the solubility of Al<sub>2</sub>O<sub>3</sub> in H<sub>2</sub>O?", options: ["Highly soluble", "Slightly soluble", "Insoluble", "Forms a precipitate"], correctAnswer: "Insoluble" },
            { questionText: "When P<sub>4</sub>O<sub>10</sub> reacts with H<sub>2</sub>O, what type of solution is formed?", options: ["Basic solution", "Neutral solution", "Weakly acidic solution", "Strongly acidic solution"], correctAnswer: "Strongly acidic solution" },
            { questionText: "What is the main product when SO<sub>2</sub> reacts with H<sub>2</sub>O?", options: ["H<sub>2</sub>SO<sub>4</sub>", "H<sub>2</sub>SO<sub>3</sub>", "H<sub>2</sub>S", "No reaction"], correctAnswer: "H<sub>2</sub>SO<sub>3</sub>" },
            { questionText: "What are the products when amphoteric Al<sub>2</sub>O<sub>3</sub> reacts with dilute HCl?", options: ["No reaction", "AlCl<sub>3</sub> and H<sub>2</sub>O", "H<sub>2</sub> gas", "A precipitate"], correctAnswer: "AlCl<sub>3</sub> and H<sub>2</sub>O" },
            { questionText: "What is the complex salt formed when Al<sub>2</sub>O<sub>3</sub> reacts with hot, concentrated NaOH?", options: ["No reaction", "Na[Al(OH)<sub>4</sub>]", "H<sub>2</sub> gas", "A precipitate"], correctAnswer: "Na[Al(OH)<sub>4</sub>]" },
            { questionText: "What are the products when basic Na<sub>2</sub>O reacts with dilute HCl?", options: ["NaOH only", "NaCl and H<sub>2</sub>O", "H<sub>2</sub> gas", "No reaction"], correctAnswer: "NaCl and H<sub>2</sub>O" },
            { questionText: "What are the products when acidic P<sub>4</sub>O<sub>10</sub> reacts with dilute KOH?", options: ["No reaction", "K<sub>3</sub>PO<sub>4</sub> and H<sub>2</sub>O", "H<sub>2</sub> gas", "A precipitate"], correctAnswer: "K<sub>3</sub>PO<sub>4</sub> and H<sub>2</sub>O" },
            { questionText: "Which equation correctly shows the reaction of Na<sub>2</sub>O with H<sub>2</sub>O?", options: ["Na<sub>2</sub>O + H<sub>2</sub>O â†’ 2NaOH", "NaO + H<sub>2</sub>O â†’ NaOH", "Na<sub>2</sub>O + H<sub>2</sub>O â†’ Na(OH)<sub>2</sub>", "Na<sub>2</sub>O + 2H<sub>2</sub>O â†’ 2NaOH + H<sub>2</sub>"], correctAnswer: "Na<sub>2</sub>O + H<sub>2</sub>O â†’ 2NaOH" },
            { questionText: "Complete the following reaction: SO<sub>3</sub> + H<sub>2</sub>O â†’ ?", options: ["H<sub>2</sub>SO<sub>4</sub>", "H<sub>2</sub>SO<sub>3</sub>", "H<sub>2</sub>S + O<sub>2</sub>", "No reaction"], correctAnswer: "H<sub>2</sub>SO<sub>4</sub>" },
            { questionText: "What are the products of this reaction: Al<sub>2</sub>O<sub>3</sub> + 6HCl â†’ ?", options: ["2AlCl<sub>3</sub> + 3H<sub>2</sub>O", "Al<sub>2</sub>Cl<sub>6</sub> + 3H<sub>2</sub>", "2AlCl<sub>3</sub> + 3H<sub>2</sub>", "No reaction"], correctAnswer: "2AlCl<sub>3</sub> + 3H<sub>2</sub>O" },
            { questionText: "Which equation represents a neutralization reaction with an acidic oxide?", options: ["SO<sub>2</sub> + 2NaOH â†’ Na<sub>2</sub>SO<sub>3</sub> + H<sub>2</sub>O", "MgO + H<sub>2</sub>O â†’ Mg(OH)<sub>2</sub>", "2CO + O<sub>2</sub> â†’ 2CO<sub>2</sub>", "Al<sub>2</sub>O<sub>3</sub> + H<sub>2</sub>O â†’ No reaction"], correctAnswer: "SO<sub>2</sub> + 2NaOH â†’ Na<sub>2</sub>SO<sub>3</sub> + H<sub>2</sub>O" },
            { questionText: "Which oxide is known for being insoluble in water but reacting with hot, concentrated NaOH(aq)?", options: ["MgO", "SiO<sub>2</sub>", "P<sub>4</sub>O<sub>10</sub>", "Na<sub>2</sub>O"], correctAnswer: "SiO<sub>2</sub>" },
            { questionText: "The reaction of Cl<sub>2</sub>O(g) with H<sub>2</sub>O(l) produces which weak acid?", options: ["HCl", "HClO<sub>3</sub>", "HOCl", "HClO<sub>4</sub>"], correctAnswer: "HOCl" },
            { questionText: "When MgO is added to water, the resulting solution is...", options: ["Strongly acidic (pH 1)", "Neutral (pH 7)", "Strongly alkaline (pH 14)", "Weakly alkaline (pH ~10)"], correctAnswer: "Weakly alkaline (pH ~10)" },
            { questionText: "In industrial scrubbers, SO<sub>2</sub> can be removed by reacting it with CaO. What is the product? (CaO + SO<sub>2</sub> â†’ ?)", options: ["CaSO<sub>4</sub>", "CaS", "CaSO<sub>3</sub>", "Ca(OH)<sub>2</sub>"], correctAnswer: "CaSO<sub>3</sub>" },
            { questionText: "Which ionic equation shows Al<sub>2</sub>O<sub>3</sub> acting as a base?", options: ["Al<sub>2</sub>O<sub>3</sub> + 2OH<sup>-</sup> + 3H<sub>2</sub>O â†’ 2Al(OH)<sub>4</sub><sup>-</sup>", "Al<sub>2</sub>O<sub>3</sub> + 6H<sup>+</sup> â†’ 2Al<sup>3+</sup> + 3H<sub>2</sub>O", "Al<sub>2</sub>O<sub>3</sub> â†’ 2Al<sup>3+</sup> + 3O<sup>2-</sup>", "2Al + 3O<sub>2</sub> â†’ Al<sub>2</sub>O<sub>3</sub>"], correctAnswer: "Al<sub>2</sub>O<sub>3</sub> + 6H<sup>+</sup> â†’ 2Al<sup>3+</sup> + 3H<sub>2</sub>O" }
        ];

        // Encouraging feedback messages! Learning is a journey, not a race.
        const correctFeedback = ["Excellent!", "Great job!", "You've got it!", "Chemistry genius!", "Keep it up!", "Awesome!"];
        const incorrectFeedback = ["Not quite, but good try!", "That's a tricky one!", "Almost there!", "Don't worry, learning is a process."];

        let currentQuizData = null;
        let currentQuizType = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let totalQuestions = 5;

        // A map to easily access DOM elements for each quiz type
        const quizElements = {
            classification: {
                quizDiv: document.getElementById('classificationQuiz'),
                settingsDiv: document.getElementById('classificationSettings'),
                quizAreaDiv: document.getElementById('classificationQuizArea'),
                resultsDiv: document.getElementById('classificationResults'),
                numQuestionsSelect: document.getElementById('classificationNumQuestions'),
                questionCounter: document.getElementById('classificationQuestionCounter'),
                currentQuestionDiv: document.getElementById('classificationCurrentQuestion'),
                optionsContainer: document.getElementById('classificationOptionsContainer'),
                feedbackDiv: document.getElementById('classificationFeedback'),
                nextQuestionBtn: document.getElementById('classificationNextQuestionBtn'),
                scoreSummary: document.getElementById('classificationScoreSummary'),
                resultMessage: document.getElementById('classificationResultMessage')
            },
            bonding: {
                quizDiv: document.getElementById('bondingQuiz'),
                settingsDiv: document.getElementById('bondingSettings'),
                quizAreaDiv: document.getElementById('bondingQuizArea'),
                resultsDiv: document.getElementById('bondingResults'),
                numQuestionsSelect: document.getElementById('bondingNumQuestions'),
                questionCounter: document.getElementById('bondingQuestionCounter'),
                currentQuestionDiv: document.getElementById('bondingCurrentQuestion'),
                optionsContainer: document.getElementById('bondingOptionsContainer'),
                feedbackDiv: document.getElementById('bondingFeedback'),
                nextQuestionBtn: document.getElementById('bondingNextQuestionBtn'),
                scoreSummary: document.getElementById('bondingScoreSummary'),
                resultMessage: document.getElementById('bondingResultMessage')
            },
            reactions: {
                quizDiv: document.getElementById('reactionsQuiz'),
                settingsDiv: document.getElementById('reactionsSettings'),
                quizAreaDiv: document.getElementById('reactionsQuizArea'),
                resultsDiv: document.getElementById('reactionsResults'),
                numQuestionsSelect: document.getElementById('reactionsNumQuestions'),
                questionCounter: document.getElementById('reactionsQuestionCounter'),
                currentQuestionDiv: document.getElementById('reactionsCurrentQuestion'),
                optionsContainer: document.getElementById('reactionsOptionsContainer'),
                feedbackDiv: document.getElementById('reactionsFeedback'),
                nextQuestionBtn: document.getElementById('reactionsNextQuestionBtn'),
                scoreSummary: document.getElementById('reactionsScoreSummary'),
                resultMessage: document.getElementById('reactionsResultMessage')
            }
        };
        const quizSelectionDiv = document.getElementById('quizSelection');

        function showQuizSettings(type) {
            currentQuizType = type;
            quizSelectionDiv.style.display = 'none';
            Object.values(quizElements).forEach(elements => elements.quizDiv.style.display = 'none');
            quizElements[type].quizDiv.style.display = 'block';
            quizElements[type].settingsDiv.style.display = 'block';
            quizElements[type].quizAreaDiv.style.display = 'none';
            quizElements[type].resultsDiv.style.display = 'none';
        }

        // Shuffling the array makes sure you get a different quiz each time!
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startQuiz(type) {
            const elements = quizElements[type];
            if (type === 'classification') {
                currentQuizData = classificationOxides;
            } else if (type === 'bonding') {
                currentQuizData = bondingAndStructureOxides;
            } else if (type === 'reactions') {
                currentQuizData = reactionsOxides;
            }
            
            totalQuestions = parseInt(elements.numQuestionsSelect.value) || currentQuizData.length;
            shuffleArray(currentQuizData);
            currentQuestions = currentQuizData.slice(0, totalQuestions);
            currentQuestionIndex = 0;
            score = 0;

            elements.settingsDiv.style.display = 'none';
            elements.quizAreaDiv.style.display = 'block';

            loadQuestion(type);
        }

        function loadQuestion(type) {
            if (currentQuestionIndex >= currentQuestions.length) {
                showResults(type);
                return;
            }
            
            const elements = quizElements[type];
            const question = currentQuestions[currentQuestionIndex];
            
            elements.questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${currentQuestions.length}`;
            
            if (type === 'classification') {
                elements.currentQuestionDiv.innerHTML = `Classify the oxide: <strong>${question.oxide}</strong>`;
                Array.from(elements.optionsContainer.children).forEach(button => {
                    button.className = 'option-button'; // Reset styles
                    button.disabled = false;
                });
            } else { // Handles 'bonding' and 'reactions' which are dynamic
                elements.currentQuestionDiv.innerHTML = question.questionText;
                elements.optionsContainer.innerHTML = '';
                const shuffledOptions = [...question.options];
                shuffleArray(shuffledOptions);
                shuffledOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.className = 'option-button';
                    // Use innerHTML to render subscript/superscript tags correctly
                    button.innerHTML = option; 
                    button.dataset.answer = option;
                    button.onclick = () => checkAnswer(button, type);
                    elements.optionsContainer.appendChild(button);
                });
            }

            elements.feedbackDiv.textContent = '';
            elements.nextQuestionBtn.disabled = true;
        }

        function checkAnswer(selectedButton, type) {
            const elements = quizElements[type];
            const question = currentQuestions[currentQuestionIndex];
            const correctAnswer = question.correctAnswer || question.type;
            const userAnswer = selectedButton.dataset.answer;

            Array.from(elements.optionsContainer.children).forEach(button => {
                button.disabled = true;
                if (button.dataset.answer === correctAnswer) {
                    button.classList.add('correct');
                } else if (button === selectedButton) {
                    button.classList.add('incorrect');
                }
            });

            if (userAnswer === correctAnswer) {
                elements.feedbackDiv.textContent = correctFeedback[Math.floor(Math.random() * correctFeedback.length)];
                elements.feedbackDiv.style.color = 'var(--correct-color)';
                score++;
            } else {
                elements.feedbackDiv.innerHTML = `${incorrectFeedback[Math.floor(Math.random() * incorrectFeedback.length)]} The correct answer is: ${correctAnswer}.`;
                elements.feedbackDiv.style.color = 'var(--incorrect-color)';
            }
            elements.nextQuestionBtn.disabled = false;
        }

        function nextQuestion(type) {
            currentQuestionIndex++;
            loadQuestion(type);
        }

        function showResults(type) {
            const elements = quizElements[type];
            elements.quizAreaDiv.style.display = 'none';
            elements.resultsDiv.style.display = 'block';
            elements.scoreSummary.textContent = `You scored ${score} out of ${currentQuestions.length}!`;

            // Personalized messages based on score. Everyone is a winner for trying!
            const percentage = (score / currentQuestions.length) * 100;
            let message = '';
            if (percentage === 100) {
                message = "Perfect score! You're a true chemistry champion! ðŸ†";
            } else if (percentage >= 75) {
                message = "Fantastic work! You have a strong understanding of oxides. ðŸ‘";
            } else if (percentage >= 50) {
                message = "Good job! You're on the right track. A little more practice will make you an expert. ðŸ˜Š";
            } else {
                message = "Every expert starts somewhere. Keep reviewing and trying again. You can do it! ðŸ’ª";
            }
            elements.resultMessage.textContent = message;
        }

        function resetQuiz(type) {
            const elements = quizElements[type];
            elements.resultsDiv.style.display = 'none';
            elements.settingsDiv.style.display = 'block';
            elements.numQuestionsSelect.value = "5";
        }

        function resetToSelection() {
            quizSelectionDiv.style.display = 'block';
            Object.values(quizElements).forEach(elements => {
                elements.quizDiv.style.display = 'none';
            });
        }

        // Let's start the journey!
        resetToSelection();
    </script>
</body>
</html>
