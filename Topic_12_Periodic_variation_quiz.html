<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Quiz: Periodic Properties</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Sound and Confetti Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>

    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --background-color: #f4f7f6;
            --surface-color: #ffffff;
            --correct-color: #27ae60;
            --selected-color: #4a90e2;
            --text-color: #4a4a4a;
            --header-color: #333;
            --light-gray: #e6e6e6;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(to right, #6dd5ed, #2193b0);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem;
            box-sizing: border-box;
        }

        .quiz-container {
            background-color: var(--surface-color);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            padding: 2.5rem;
            width: 100%;
            max-width: 700px;
            transition: all 0.3s ease;
            border: 1px solid #fff;
        }
        
        #quiz-screen {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            text-align: center;
            color: var(--header-color);
            font-weight: 700;
            margin-bottom: 2rem;
        }

        .question {
            font-size: 1.25em;
            font-weight: 600;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .options {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .options li {
            background-color: #f8f9fa;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .options li:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }
        
        .options li.correct {
            background-color: #eafaf1;
            border-color: var(--correct-color);
            color: var(--correct-color);
            font-weight: 600;
        }

        .options li.selected {
           background-color: #eaf5fb;
           border-color: var(--selected-color);
        }

        .explanation {
            margin-top: 2rem;
            padding: 1.25rem;
            border-radius: 12px;
            background-color: #f8f9fa;
            font-size: 0.95em;
            border: 1px solid var(--light-gray);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .btn, .selection-screen button, .final-screen button {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: #fff;
            border: none;
            padding: 0.8rem 1.8rem;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover, .selection-screen button:hover, .final-screen button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .score {
            text-align: center;
            font-size: 1.2em;
            font-weight: 600;
            margin-top: 1.5rem;
            color: var(--header-color);
        }

        .encouragement {
            text-align: center;
            font-style: italic;
            color: #7f8c8d;
            margin-top: 1rem;
            min-height: 20px;
        }

        .selection-screen, .final-screen {
            text-align: center;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .selection-screen p, .final-screen p {
            font-size: 1.1em;
            margin-bottom: 1.5rem;
        }

        .selection-screen button {
            margin: 0.5rem;
        }

    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>Periodic Properties Quiz</h1>
        <div id="selection-screen">
            <p>How many questions would you like to answer?</p>
            <button onclick="startQuiz(5)">5 Questions</button>
            <button onclick="startQuiz(10)">10 Questions</button>
        </div>
        <div id="quiz-screen" style="display: none;">
            <div id="question-container">
                <p class="question"></p>
                <ul class="options"></ul>
            </div>
            <div id="explanation" class="explanation" style="display: none;"></div>
            <div class="score"></div>
            <div class="encouragement"></div>
            <div class="navigation">
                <button id="prev-btn" class="btn" onclick="navigate(-1)">Previous</button>
                <button id="next-btn" class="btn" onclick="navigate(1)">Next</button>
            </div>
        </div>
        <div id="final-screen" class="final-screen" style="display: none;">
            <p id="final-score"></p>
            <p>Would you like to try again?</p>
            <button onclick="restartQuiz()">Restart Quiz</button>
        </div>
    </div>

    <script>
        const allQuestions = [
            {
                question: "Which element has the highest melting point in Period 3?",
                options: ["Sodium (Na)", "Silicon (Si)", "Sulphur (S)", "Argon (Ar)"],
                answer: "Silicon (Si)",
                explanation: "Silicon has the highest melting point because it has a giant covalent structure. A large amount of energy is needed to break the strong covalent bonds between its atoms. The other elements listed have metallic (Na) or simple molecular structures (S, Ar) with weaker forces."
            },
            {
                question: "Why does the melting point increase from Sodium (Na) to Aluminium (Al)?",
                options: ["The atoms get smaller.", "The number of delocalized electrons increases.", "The bonding changes from metallic to covalent.", "The nuclear charge decreases."],
                answer: "The number of delocalized electrons increases.",
                explanation: "Na, Mg, and Al all have giant metallic structures. As you move from Na to Al, the number of delocalized electrons contributed by each atom increases (from 1 to 3). This results in a stronger metallic bond, which requires more energy to overcome."
            },
            {
                question: "Why is the melting point of Carbon (diamond) extremely high, while Neon's is extremely low?",
                options: ["Carbon is a solid and Neon is a gas.", "Carbon has stronger van der Waals forces.", "Carbon has giant covalent structure while Neon has simple molecular structure.", "Carbon has more electrons than Neon."],
                answer: "Carbon has giant covalent structure while Neon has simple molecular structure.",
                explanation: "Carbon (diamond) has a giant covalent structure requiring immense energy to break strong covalent bonds. Neon exists as individual atoms held by very weak van der Waals forces, which require very little energy to overcome."
            },
            {
                question: "Why does Sulphur have a higher melting point than Phosphorus?",
                options: ["Sulphur has stronger covalent bonds.", "Sulphur is a metal.", "S₈ molecules are larger than P₄ molecules.", "Phosphorus is more reactive."],
                answer: "S₈ molecules are larger than P₄ molecules.",
                explanation: "Both are simple molecular substances. However, S₈ molecules are larger and have more electrons than P₄ molecules. This leads to stronger van der Waals forces between S₈ molecules, requiring more energy to melt."
            },
            {
                question: "Arrange the following Period 2 elements in order of INCREASING melting point:",
                options: [
                    "Nitrogen < Lithium < Beryllium < Carbon",
                    "Lithium < Beryllium < Nitrogen < Carbon",
                    "Carbon < Beryllium < Lithium < Nitrogen",
                    "Nitrogen < Carbon < Lithium < Beryllium"
                ],
                answer: "Nitrogen < Lithium < Beryllium < Carbon",
                explanation: "The order is based on structure and bonding. Nitrogen (simple molecular) has the lowest m.p. due to weak van der Waals forces. Li and Be (metallic) are next, with Be's bond being stronger. Carbon (giant covalent) has the highest m.p. because strong covalent bonds must be broken."
            },
            {
                question: "Arrange these Period 3 elements in order of DECREASING electrical conductivity:",
                options: [
                    "Al > Na > Si > S",
                    "Si > Al > Na > S",
                    "S > Si > Na > Al",
                    "Al > Si > Na > S"
                ],
                answer: "Al > Na > Si > S",
                explanation: "Conductivity depends on delocalized electrons. Al (3 delocalized e⁻) > Na (1 delocalized e⁻). Si is a semiconductor with far lower conductivity. S is a molecular insulator with no delocalized electrons."
            },
            {
                question: "An element 'X' is in Period 3, Group V. How would you expect its melting point to compare to its neighbors, Silicon and Sulphur?",
                options: [
                    "Higher than both Si and S",
                    "Lower than Si, but higher than S",
                    "Much lower than Si, and comparable to S",
                    "About halfway between Si and S"
                ],
                answer: "Much lower than Si, and comparable to S",
                explanation: "Element 'X' is Phosphorus (P). Moving from Si (giant covalent) to P (simple molecular, P₄) causes a massive drop in melting point. P and S both have simple molecular structures, so their melting points are in a similar low range, determined by the strength of their van der Waals forces."
            },
            {
                question: "Magnesium (Period 3) is a solid with a high melting point, while Chlorine (Period 3) is a gas at room temp. What is the most fundamental reason for this difference?",
                options: [
                    "The difference in atomic mass.",
                    "Magnesium has fewer valence electrons.",
                    "The difference in their bonding and structure.",
                    "Chlorine is more electronegative."
                ],
                answer: "The difference in their bonding and structure.",
                explanation: "This is the core reason. Mg has a giant metallic structure with strong metallic bonds holding its atoms together. Cl exists as discrete Cl₂ molecules with only weak van der Waals forces between them. The type of structure dictates the forces that must be overcome to melt or boil the substance."
            },
             {
                question: "Arrange the following noble gases in order of INCREASING boiling point:",
                options: [
                    "Argon < Neon < Helium",
                    "Helium < Argon < Neon",
                    "Neon < Helium < Argon",
                    "Helium < Neon < Argon"
                ],
                answer: "Helium < Neon < Argon",
                explanation: "Boiling point in noble gases depends on the strength of van der Waals forces. As you go down the group, the atoms get larger with more electrons, leading to stronger van der Waals forces and a higher boiling point."
            },
            {
                question: "Arrange these elements from Period 2 and 3 in order of DECREASING melting point:",
                options: [
                    "C > Si > Al > Mg",
                    "Si > C > Al > Mg",
                    "C > Al > Mg > Si",
                    "Al > Mg > C > Si"
                ],
                answer: "C > Si > Al > Mg",
                explanation: "The order is based on structure and bond strength. C (diamond) has the highest m.p. (strongest giant covalent). Si (giant covalent) is next but has weaker bonds. Al and Mg are metallic, with Al having stronger bonds (more delocalized e⁻) than Mg."
            },
            {
                question: "Arrange the following Period 3 elements in order of INCREASING boiling point:",
                options: [
                    "Ar < Cl < P < S",
                    "Ar < P < Cl < S",
                    "P < S < Cl < Ar",
                    "Cl < Ar < P < S"
                ],
                answer: "Ar < Cl < P < S",
                explanation: "All have simple molecular structures. Boiling point depends on the strength of van der Waals forces, which increase with molecular size/number of electrons. The order of molecular size is Ar < Cl₂ < P₄ < S₈."
            }
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        
        // Sound effects setup
        let correctSynth, incorrectSynth;
        
        function setupAudio() {
            correctSynth = new Tone.Synth({
                oscillator: { type: 'sine' },
                envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 }
            }).toDestination();
            
            incorrectSynth = new Tone.Synth({
                oscillator: { type: 'square' },
                envelope: { attack: 0.005, decay: 0.2, sustain: 0.1, release: 1 }
            }).toDestination();
        }

        async function startQuiz(numQuestions) {
            // Start audio context on user interaction
            if (Tone.context.state !== 'running') {
                await Tone.start();
            }
            setupAudio();

            const shuffled = allQuestions.sort(() => 0.5 - Math.random());
            currentQuestions = shuffled.slice(0, numQuestions);
            
            userAnswers = new Array(numQuestions).fill(null);
            currentQuestionIndex = 0;
            score = 0;
            document.getElementById('selection-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('final-screen').style.display = 'none';
            displayQuestion();
        }

        function displayQuestion() {
            const questionData = currentQuestions[currentQuestionIndex];
            const questionContainer = document.getElementById('question-container');
            questionContainer.querySelector('.question').innerHTML = questionData.question;
            const optionsList = questionContainer.querySelector('.options');
            optionsList.innerHTML = '';
            
            questionData.options.forEach(option => {
                const li = document.createElement('li');
                li.innerHTML = option;
                li.onclick = () => selectOption(li, option);
                optionsList.appendChild(li);
            });

            document.getElementById('explanation').style.display = 'none';
            document.querySelector('.score').textContent = `Score: ${score} / ${currentQuestions.length}`;
            document.querySelector('.encouragement').textContent = '';
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').textContent = currentQuestionIndex === currentQuestions.length - 1 ? 'Finish' : 'Next';
            
            if (userAnswers[currentQuestionIndex]) {
                showResult(userAnswers[currentQuestionIndex].selected, false); // Don't play sound when navigating
            }
        }

        function selectOption(selectedLi, selectedOption) {
            if (userAnswers[currentQuestionIndex]) return;

            const isCorrect = selectedOption === currentQuestions[currentQuestionIndex].answer;
            
            if (isCorrect) {
                score++;
            }

            userAnswers[currentQuestionIndex] = { selected: selectedOption, correct: isCorrect };
            showResult(selectedOption, true); // Play sound on new answer
        }

        function showResult(selectedOption, playEffects) {
            const questionData = currentQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('.options li');
            const isCorrect = selectedOption === questionData.answer;

            if (playEffects) {
                if (isCorrect) {
                    correctSynth.triggerAttackRelease("C5", "8n");
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                } else {
                    incorrectSynth.triggerAttackRelease("A3", "8n");
                }
            }

            options.forEach(li => {
                li.style.pointerEvents = 'none';
                if (li.innerHTML === selectedOption) {
                    li.classList.add('selected');
                }
                if (li.innerHTML === questionData.answer) {
                    li.classList.add('correct');
                }
            });

            const explanationDiv = document.getElementById('explanation');
            explanationDiv.innerHTML = `<strong>Explanation:</strong> ${questionData.explanation}`;
            explanationDiv.style.display = 'block';

            document.querySelector('.score').textContent = `Score: ${score} / ${currentQuestions.length}`;
            document.querySelector('.encouragement').textContent = isCorrect ? "Excellent! That's correct! ✨" : "Not quite, but good try! 👍";
        }

        function navigate(direction) {
            currentQuestionIndex += direction;
            if (currentQuestionIndex >= 0 && currentQuestionIndex < currentQuestions.length) {
                displayQuestion();
            } else if (currentQuestionIndex === currentQuestions.length) {
                showFinalScreen();
            } else {
                currentQuestionIndex = 0; 
            }
        }

        function showFinalScreen() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('final-screen').style.display = 'block';
            document.getElementById('final-score').textContent = `You finished the quiz! Your final score is ${score} out of ${currentQuestions.length}. 🎉`;
            
            // Big confetti celebration for a good score
            if ((score / currentQuestions.length) >= 0.8) {
                const duration = 3 * 1000;
                const animationEnd = Date.now() + duration;
                const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

                function randomInRange(min, max) {
                    return Math.random() * (max - min) + min;
                }

                const interval = setInterval(function() {
                    const timeLeft = animationEnd - Date.now();
                    if (timeLeft <= 0) {
                        return clearInterval(interval);
                    }
                    const particleCount = 50 * (timeLeft / duration);
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
                }, 250);
            }
        }
        
        function restartQuiz() {
            document.getElementById('selection-screen').style.display = 'block';
            document.getElementById('final-screen').style.display = 'none';
        }
    </script>
</body>
</html>
